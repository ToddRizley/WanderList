require 'rails_helper'
describe 'Services' do
  describe 'QuoteUpdater' do
    it '#prepare_quotes parses JSON and updates codes with names' do

      quote_updater = Services::QuoteUpdater.new

      quotes = [{"QuoteId"=>3, "MinPrice"=>97.0, "Direct"=>true, "OutboundLeg"=>{"CarrierIds"=>[870], "OriginId"=>60987, "DestinationId"=>42995, "DepartureDate"=>"2017-03-30T00:00:00"}, "InboundLeg"=>{"CarrierIds"=>[870], "OriginId"=>42995, "DestinationId"=>60987, "DepartureDate"=>"2017-04-05T00:00:00"}}]

      carriers = [{"CarrierId"=>241, "Name"=>"South African Airways"}, {"CarrierId"=>835, "Name"=>"Air Canada"}, {"CarrierId"=>838, "Name"=>"Air France"}, {"CarrierId"=>845, "Name"=>"Aeromexico"}, {"CarrierId"=>852, "Name"=>"Royal Air Maroc"}, {"CarrierId"=>854, "Name"=>"Avianca"}, {"CarrierId"=>857, "Name"=>"Finnair"}, {"CarrierId"=>870, "Name"=>"jetBlue"}, {"CarrierId"=>881, "Name"=>"British Airways"}, {"CarrierId"=>898, "Name"=>"EVA Air"}, {"CarrierId"=>903, "Name"=>"Caribbean Airlines"}, {"CarrierId"=>941, "Name"=>"Copa"}, {"CarrierId"=>954, "Name"=>"China Southern"}, {"CarrierId"=>1001, "Name"=>"Norwegian"}, {"CarrierId"=>1035, "Name"=>"Emirates"}, {"CarrierId"=>1065, "Name"=>"Frontier Airlines"}, {"CarrierId"=>1081, "Name"=>"Icelandair"}, {"CarrierId"=>1218, "Name"=>"Iberia"}, {"CarrierId"=>1274, "Name"=>"LATAM Airlines Brasil"}, {"CarrierId"=>1276, "Name"=>"Japan Airlines"}, {"CarrierId"=>1285, "Name"=>"Air Serbia"}, {"CarrierId"=>1361, "Name"=>"LATAM Airlines Group"}, {"CarrierId"=>1368, "Name"=>"Lufthansa"}, {"CarrierId"=>1384, "Name"=>"Swiss"}, {"CarrierId"=>1385, "Name"=>"EL AL Israel Airlines"}, {"CarrierId"=>1429, "Name"=>"China Eastern"}, {"CarrierId"=>1467, "Name"=>"Spirit Airlines"}, {"CarrierId"=>1523, "Name"=>"Austrian Airlines"}, {"CarrierId"=>1530, "Name"=>"Asiana Airlines"}, {"CarrierId"=>1556, "Name"=>"Porter Airlines"}, {"CarrierId"=>1571, "Name"=>"Ukraine International"}, {"CarrierId"=>1707, "Name"=>"SAS"}, {"CarrierId"=>1717, "Name"=>"Aeroflot"}, {"CarrierId"=>1718, "Name"=>"Saudia"}, {"CarrierId"=>1755, "Name"=>"Turkish Airlines"}, {"CarrierId"=>1760, "Name"=>"TAP Portugal"}, {"CarrierId"=>1793, "Name"=>"United"}, {"CarrierId"=>1825, "Name"=>"Virgin Australia"}, {"CarrierId"=>1859, "Name"=>"Virgin Atlantic"}, {"CarrierId"=>1929, "Name"=>"WOW air"}, {"CarrierId"=>1972, "Name"=>"Volaris"}]

      places = [{"PlaceId"=>837, "Name"=>"United Arab Emirates", "Type"=>"Country", "SkyscannerCode"=>"AE"}, {"PlaceId"=>838, "Name"=>"Afghanistan", "Type"=>"Country", "SkyscannerCode"=>"AF"}, {"PlaceId"=>839, "Name"=>"Antigua and Barbuda", "Type"=>"Country", "SkyscannerCode"=>"AG"}, {"PlaceId"=>844, "Name"=>"Albania", "Type"=>"Country", "SkyscannerCode"=>"AL"}, {"PlaceId"=>845, "Name"=>"Armenia", "Type"=>"Country", "SkyscannerCode"=>"AM"}, {"PlaceId"=>847, "Name"=>"Angola", "Type"=>"Country", "SkyscannerCode"=>"AO"}, {"PlaceId"=>850, "Name"=>"Argentina", "Type"=>"Country", "SkyscannerCode"=>"AR"}, {"PlaceId"=>852, "Name"=>"Austria", "Type"=>"Country", "SkyscannerCode"=>"AT"}, {"PlaceId"=>853, "Name"=>"Australia", "Type"=>"Country", "SkyscannerCode"=>"AU"}, {"PlaceId"=>855, "Name"=>"Aruba", "Type"=>"Country", "SkyscannerCode"=>"AW"}, {"PlaceId"=>858, "Name"=>"Azerbaijan", "Type"=>"Country", "SkyscannerCode"=>"AZ"}, {"PlaceId"=>881, "Name"=>"Bosnia and Herzegovina", "Type"=>"Country", "SkyscannerCode"=>"BA"}, {"PlaceId"=>882, "Name"=>"Barbados", "Type"=>"Country", "SkyscannerCode"=>"BB"}, {"PlaceId"=>884, "Name"=>"Bangladesh", "Type"=>"Country", "SkyscannerCode"=>"BD"}, {"PlaceId"=>885, "Name"=>"Belgium", "Type"=>"Country", "SkyscannerCode"=>"BE"}, {"PlaceId"=>886, "Name"=>"Burkina Faso", "Type"=>"Country", "SkyscannerCode"=>"BF"}, {"PlaceId"=>887, "Name"=>"Bulgaria", "Type"=>"Country", "SkyscannerCode"=>"BG"}, {"PlaceId"=>888, "Name"=>"Bahrain", "Type"=>"Country", "SkyscannerCode"=>"BH"}, {"PlaceId"=>890, "Name"=>"Benin", "Type"=>"Country", "SkyscannerCode"=>"BJ"}, {"PlaceId"=>893, "Name"=>"Bermuda", "Type"=>"Country", "SkyscannerCode"=>"BM"}, {"PlaceId"=>894, "Name"=>"Brunei", "Type"=>"Country", "SkyscannerCode"=>"BN"}, {"PlaceId"=>895, "Name"=>"Bolivia", "Type"=>"Country", "SkyscannerCode"=>"BO"}, {"PlaceId"=>898, "Name"=>"Brazil", "Type"=>"Country", "SkyscannerCode"=>"BR"}, {"PlaceId"=>899, "Name"=>"Bahamas", "Type"=>"Country", "SkyscannerCode"=>"BS"}, {"PlaceId"=>903, "Name"=>"Botswana", "Type"=>"Country", "SkyscannerCode"=>"BW"}, {"PlaceId"=>905, "Name"=>"Belarus", "Type"=>"Country", "SkyscannerCode"=>"BY"}, {"PlaceId"=>906, "Name"=>"Belize", "Type"=>"Country", "SkyscannerCode"=>"BZ"}, {"PlaceId"=>929, "Name"=>"Canada", "Type"=>"Country", "SkyscannerCode"=>"CA"}, {"PlaceId"=>932, "Name"=>"DR Congo", "Type"=>"Country", "SkyscannerCode"=>"CD"}, {"PlaceId"=>933, "Name"=>"Crimea", "Type"=>"Country", "SkyscannerCode"=>"CE"}, {"PlaceId"=>935, "Name"=>"Congo", "Type"=>"Country", "SkyscannerCode"=>"CG"}, {"PlaceId"=>936, "Name"=>"Switzerland", "Type"=>"Country", "SkyscannerCode"=>"CH"}, {"PlaceId"=>937, "Name"=>"Ivory Coast", "Type"=>"Country", "SkyscannerCode"=>"CI"}, {"PlaceId"=>940, "Name"=>"Chile", "Type"=>"Country", "SkyscannerCode"=>"CL"}, {"PlaceId"=>941, "Name"=>"Cameroon", "Type"=>"Country", "SkyscannerCode"=>"CM"}, {"PlaceId"=>942, "Name"=>"China", "Type"=>"Country", "SkyscannerCode"=>"CN"}, {"PlaceId"=>943, "Name"=>"Colombia", "Type"=>"Country", "SkyscannerCode"=>"CO"}, {"PlaceId"=>946, "Name"=>"Costa Rica", "Type"=>"Country", "SkyscannerCode"=>"CR"}, {"PlaceId"=>949, "Name"=>"Cuba", "Type"=>"Country", "SkyscannerCode"=>"CU"}, {"PlaceId"=>950, "Name"=>"Cape Verde", "Type"=>"Country", "SkyscannerCode"=>"CV"}, {"PlaceId"=>951, "Name"=>"Curacao", "Type"=>"Country", "SkyscannerCode"=>"CW"}, {"PlaceId"=>953, "Name"=>"Cyprus", "Type"=>"Country", "SkyscannerCode"=>"CY"}, {"PlaceId"=>954, "Name"=>"Czech Republic", "Type"=>"Country", "SkyscannerCode"=>"CZ"}, {"PlaceId"=>981, "Name"=>"Germany", "Type"=>"Country", "SkyscannerCode"=>"DE"}, {"PlaceId"=>986, "Name"=>"Djibouti", "Type"=>"Country", "SkyscannerCode"=>"DJ"}, {"PlaceId"=>987, "Name"=>"Denmark", "Type"=>"Country", "SkyscannerCode"=>"DK"}, {"PlaceId"=>989, "Name"=>"Dominica", "Type"=>"Country", "SkyscannerCode"=>"DM"}, {"PlaceId"=>991, "Name"=>"Dominican Republic", "Type"=>"Country", "SkyscannerCode"=>"DO"}, {"PlaceId"=>1002, "Name"=>"Algeria", "Type"=>"Country", "SkyscannerCode"=>"DZ"}, {"PlaceId"=>1027, "Name"=>"Ecuador", "Type"=>"Country", "SkyscannerCode"=>"EC"}, {"PlaceId"=>1029, "Name"=>"Estonia", "Type"=>"Country", "SkyscannerCode"=>"EE"}, {"PlaceId"=>1031, "Name"=>"Egypt", "Type"=>"Country", "SkyscannerCode"=>"EG"}, {"PlaceId"=>1042, "Name"=>"Eritrea", "Type"=>"Country", "SkyscannerCode"=>"ER"}, {"PlaceId"=>1043, "Name"=>"Spain", "Type"=>"Country", "SkyscannerCode"=>"ES"}, {"PlaceId"=>1044, "Name"=>"Ethiopia", "Type"=>"Country", "SkyscannerCode"=>"ET"}, {"PlaceId"=>1081, "Name"=>"Finland", "Type"=>"Country", "SkyscannerCode"=>"FI"}, {"PlaceId"=>1082, "Name"=>"Fiji", "Type"=>"Country", "SkyscannerCode"=>"FJ"}, {"PlaceId"=>1085, "Name"=>"Micronesia", "Type"=>"Country", "SkyscannerCode"=>"FM"}, {"PlaceId"=>1087, "Name"=>"Faroe Islands", "Type"=>"Country", "SkyscannerCode"=>"FO"}, {"PlaceId"=>1090, "Name"=>"France", "Type"=>"Country", "SkyscannerCode"=>"FR"}, {"PlaceId"=>1121, "Name"=>"Gabon", "Type"=>"Country", "SkyscannerCode"=>"GA"}, {"PlaceId"=>1124, "Name"=>"Grenada", "Type"=>"Country", "SkyscannerCode"=>"GD"}, {"PlaceId"=>1125, "Name"=>"Georgia", "Type"=>"Country", "SkyscannerCode"=>"GE"}, {"PlaceId"=>1126, "Name"=>"French Guiana", "Type"=>"Country", "SkyscannerCode"=>"GF"}, {"PlaceId"=>1128, "Name"=>"Ghana", "Type"=>"Country", "SkyscannerCode"=>"GH"}, {"PlaceId"=>1129, "Name"=>"Gibraltar", "Type"=>"Country", "SkyscannerCode"=>"GI"}, {"PlaceId"=>1133, "Name"=>"Gambia", "Type"=>"Country", "SkyscannerCode"=>"GM"}, {"PlaceId"=>1134, "Name"=>"Guinea", "Type"=>"Country", "SkyscannerCode"=>"GN"}, {"PlaceId"=>1137, "Name"=>"Equatorial Guinea", "Type"=>"Country", "SkyscannerCode"=>"GQ"}, {"PlaceId"=>1138, "Name"=>"Greece", "Type"=>"Country", "SkyscannerCode"=>"GR"}, {"PlaceId"=>1140, "Name"=>"Guatemala", "Type"=>"Country", "SkyscannerCode"=>"GT"}, {"PlaceId"=>1141, "Name"=>"Guam", "Type"=>"Country", "SkyscannerCode"=>"GU"}, {"PlaceId"=>1145, "Name"=>"Guyana", "Type"=>"Country", "SkyscannerCode"=>"GY"}, {"PlaceId"=>1179, "Name"=>"Hong Kong", "Type"=>"Country", "SkyscannerCode"=>"HK"}, {"PlaceId"=>1182, "Name"=>"Honduras", "Type"=>"Country", "SkyscannerCode"=>"HN"}, {"PlaceId"=>1186, "Name"=>"Croatia", "Type"=>"Country", "SkyscannerCode"=>"HR"}, {"PlaceId"=>1188, "Name"=>"Haiti", "Type"=>"Country", "SkyscannerCode"=>"HT"}, {"PlaceId"=>1189, "Name"=>"Hungary", "Type"=>"Country", "SkyscannerCode"=>"HU"}, {"PlaceId"=>1220, "Name"=>"Indonesia", "Type"=>"Country", "SkyscannerCode"=>"ID"}, {"PlaceId"=>1221, "Name"=>"Ireland", "Type"=>"Country", "SkyscannerCode"=>"IE"}, {"PlaceId"=>1228, "Name"=>"Israel", "Type"=>"Country", "SkyscannerCode"=>"IL"}, {"PlaceId"=>1230, "Name"=>"India", "Type"=>"Country", "SkyscannerCode"=>"IN"}, {"PlaceId"=>1233, "Name"=>"Iraq", "Type"=>"Country", "SkyscannerCode"=>"IQ"}, {"PlaceId"=>1234, "Name"=>"Iran", "Type"=>"Country", "SkyscannerCode"=>"IR"}, {"PlaceId"=>1235, "Name"=>"Iceland", "Type"=>"Country", "SkyscannerCode"=>"IS"}, {"PlaceId"=>1236, "Name"=>"Italy", "Type"=>"Country", "SkyscannerCode"=>"IT"}, {"PlaceId"=>1277, "Name"=>"Jamaica", "Type"=>"Country", "SkyscannerCode"=>"JM"}, {"PlaceId"=>1279, "Name"=>"Jordan", "Type"=>"Country", "SkyscannerCode"=>"JO"}, {"PlaceId"=>1280, "Name"=>"Japan", "Type"=>"Country", "SkyscannerCode"=>"JP"}, {"PlaceId"=>1317, "Name"=>"Kenya", "Type"=>"Country", "SkyscannerCode"=>"KE"}, {"PlaceId"=>1319, "Name"=>"Kyrgyzstan", "Type"=>"Country", "SkyscannerCode"=>"KG"}, {"PlaceId"=>1320, "Name"=>"Cambodia", "Type"=>"Country", "SkyscannerCode"=>"KH"}, {"PlaceId"=>1326, "Name"=>"Saint Kitts and Nevis", "Type"=>"Country", "SkyscannerCode"=>"KN"}, {"PlaceId"=>1327, "Name"=>"Kosovo", "Type"=>"Country", "SkyscannerCode"=>"KO"}, {"PlaceId"=>1330, "Name"=>"South Korea", "Type"=>"Country", "SkyscannerCode"=>"KR"}, {"PlaceId"=>1335, "Name"=>"Kuwait", "Type"=>"Country", "SkyscannerCode"=>"KW"}, {"PlaceId"=>1337, "Name"=>"Cayman Islands", "Type"=>"Country", "SkyscannerCode"=>"KY"}, {"PlaceId"=>1338, "Name"=>"Kazakhstan", "Type"=>"Country", "SkyscannerCode"=>"KZ"}, {"PlaceId"=>1362, "Name"=>"Lebanon", "Type"=>"Country", "SkyscannerCode"=>"LB"}, {"PlaceId"=>1363, "Name"=>"Saint Lucia", "Type"=>"Country", "SkyscannerCode"=>"LC"}, {"PlaceId"=>1371, "Name"=>"Sri Lanka", "Type"=>"Country", "SkyscannerCode"=>"LK"}, {"PlaceId"=>1378, "Name"=>"Liberia", "Type"=>"Country", "SkyscannerCode"=>"LR"}, {"PlaceId"=>1379, "Name"=>"Lesotho", "Type"=>"Country", "SkyscannerCode"=>"LS"}, {"PlaceId"=>1380, "Name"=>"Lithuania", "Type"=>"Country", "SkyscannerCode"=>"LT"}, {"PlaceId"=>1381, "Name"=>"Luxembourg", "Type"=>"Country", "SkyscannerCode"=>"LU"}, {"PlaceId"=>1382, "Name"=>"Latvia", "Type"=>"Country", "SkyscannerCode"=>"LV"}, {"PlaceId"=>1409, "Name"=>"Morocco", "Type"=>"Country", "SkyscannerCode"=>"MA"}, {"PlaceId"=>1412, "Name"=>"Moldova", "Type"=>"Country", "SkyscannerCode"=>"MD"}, {"PlaceId"=>1413, "Name"=>"Montenegro", "Type"=>"Country", "SkyscannerCode"=>"ME"}, {"PlaceId"=>1415, "Name"=>"Madagascar", "Type"=>"Country", "SkyscannerCode"=>"MG"}, {"PlaceId"=>1416, "Name"=>"Marshall Islands", "Type"=>"Country", "SkyscannerCode"=>"MH"}, {"PlaceId"=>1419, "Name"=>"Republic of Macedonia", "Type"=>"Country", "SkyscannerCode"=>"MK"}, {"PlaceId"=>1420, "Name"=>"Mali", "Type"=>"Country", "SkyscannerCode"=>"ML"}, {"PlaceId"=>1421, "Name"=>"Myanmar", "Type"=>"Country", "SkyscannerCode"=>"MM"}, {"PlaceId"=>1422, "Name"=>"Mongolia", "Type"=>"Country", "SkyscannerCode"=>"MN"}, {"PlaceId"=>1423, "Name"=>"Macau", "Type"=>"Country", "SkyscannerCode"=>"MO"}, {"PlaceId"=>1424, "Name"=>"Northern Mariana Islands", "Type"=>"Country", "SkyscannerCode"=>"MP"}, {"PlaceId"=>1425, "Name"=>"Martinique", "Type"=>"Country", "SkyscannerCode"=>"MQ"}, {"PlaceId"=>1426, "Name"=>"Mauritania", "Type"=>"Country", "SkyscannerCode"=>"MR"}, {"PlaceId"=>1428, "Name"=>"Malta", "Type"=>"Country", "SkyscannerCode"=>"MT"}, {"PlaceId"=>1429, "Name"=>"Mauritius", "Type"=>"Country", "SkyscannerCode"=>"MU"}, {"PlaceId"=>1430, "Name"=>"Maldives", "Type"=>"Country", "SkyscannerCode"=>"MV"}, {"PlaceId"=>1431, "Name"=>"Malawi", "Type"=>"Country", "SkyscannerCode"=>"MW"}, {"PlaceId"=>1432, "Name"=>"Mexico", "Type"=>"Country", "SkyscannerCode"=>"MX"}, {"PlaceId"=>1433, "Name"=>"Malaysia", "Type"=>"Country", "SkyscannerCode"=>"MY"}, {"PlaceId"=>1434, "Name"=>"Mozambique", "Type"=>"Country", "SkyscannerCode"=>"MZ"}, {"PlaceId"=>1457, "Name"=>"Namibia", "Type"=>"Country", "SkyscannerCode"=>"NA"}, {"PlaceId"=>1461, "Name"=>"Niger", "Type"=>"Country", "SkyscannerCode"=>"NE"}, {"PlaceId"=>1463, "Name"=>"Nigeria", "Type"=>"Country", "SkyscannerCode"=>"NG"}, {"PlaceId"=>1465, "Name"=>"Nicaragua", "Type"=>"Country", "SkyscannerCode"=>"NI"}, {"PlaceId"=>1468, "Name"=>"Netherlands", "Type"=>"Country", "SkyscannerCode"=>"NL"}, {"PlaceId"=>1471, "Name"=>"Norway", "Type"=>"Country", "SkyscannerCode"=>"NO"}, {"PlaceId"=>1472, "Name"=>"Nepal", "Type"=>"Country", "SkyscannerCode"=>"NP"}, {"PlaceId"=>1482, "Name"=>"New Zealand", "Type"=>"Country", "SkyscannerCode"=>"NZ"}, {"PlaceId"=>1517, "Name"=>"Oman", "Type"=>"Country", "SkyscannerCode"=>"OM"}, {"PlaceId"=>1553, "Name"=>"Panama", "Type"=>"Country", "SkyscannerCode"=>"PA"}, {"PlaceId"=>1557, "Name"=>"Peru", "Type"=>"Country", "SkyscannerCode"=>"PE"}, {"PlaceId"=>1558, "Name"=>"French Polynesia", "Type"=>"Country", "SkyscannerCode"=>"PF"}, {"PlaceId"=>1560, "Name"=>"Philippines", "Type"=>"Country", "SkyscannerCode"=>"PH"}, {"PlaceId"=>1563, "Name"=>"Pakistan", "Type"=>"Country", "SkyscannerCode"=>"PK"}, {"PlaceId"=>1564, "Name"=>"Poland", "Type"=>"Country", "SkyscannerCode"=>"PL"}, {"PlaceId"=>1570, "Name"=>"Puerto Rico", "Type"=>"Country", "SkyscannerCode"=>"PR"}, {"PlaceId"=>1572, "Name"=>"Portugal", "Type"=>"Country", "SkyscannerCode"=>"PT"}, {"PlaceId"=>1577, "Name"=>"Paraguay", "Type"=>"Country", "SkyscannerCode"=>"PY"}, {"PlaceId"=>1601, "Name"=>"Qatar", "Type"=>"Country", "SkyscannerCode"=>"QA"}, {"PlaceId"=>1653, "Name"=>"Reunion", "Type"=>"Country", "SkyscannerCode"=>"RE"}, {"PlaceId"=>1663, "Name"=>"Romania", "Type"=>"Country", "SkyscannerCode"=>"RO"}, {"PlaceId"=>1667, "Name"=>"Serbia", "Type"=>"Country", "SkyscannerCode"=>"RS"}, {"PlaceId"=>1669, "Name"=>"Russia", "Type"=>"Country", "SkyscannerCode"=>"RU"}, {"PlaceId"=>1671, "Name"=>"Rwanda", "Type"=>"Country", "SkyscannerCode"=>"RW"}, {"PlaceId"=>1697, "Name"=>"Saudi Arabia", "Type"=>"Country", "SkyscannerCode"=>"SA"}, {"PlaceId"=>1699, "Name"=>"Seychelles", "Type"=>"Country", "SkyscannerCode"=>"SC"}, {"PlaceId"=>1700, "Name"=>"Sudan", "Type"=>"Country", "SkyscannerCode"=>"SD"}, {"PlaceId"=>1701, "Name"=>"Sweden", "Type"=>"Country", "SkyscannerCode"=>"SE"}, {"PlaceId"=>1703, "Name"=>"Singapore", "Type"=>"Country", "SkyscannerCode"=>"SG"}, {"PlaceId"=>1705, "Name"=>"Slovenia", "Type"=>"Country", "SkyscannerCode"=>"SI"}, {"PlaceId"=>1707, "Name"=>"Slovakia", "Type"=>"Country", "SkyscannerCode"=>"SK"}, {"PlaceId"=>1708, "Name"=>"Sierra Leone", "Type"=>"Country", "SkyscannerCode"=>"SL"}, {"PlaceId"=>1710, "Name"=>"Senegal", "Type"=>"Country", "SkyscannerCode"=>"SN"}, {"PlaceId"=>1711, "Name"=>"Somalia", "Type"=>"Country", "SkyscannerCode"=>"SO"}, {"PlaceId"=>1718, "Name"=>"El Salvador", "Type"=>"Country", "SkyscannerCode"=>"SV"}, {"PlaceId"=>1720, "Name"=>"St Maarten", "Type"=>"Country", "SkyscannerCode"=>"SX"}, {"PlaceId"=>1722, "Name"=>"Swaziland", "Type"=>"Country", "SkyscannerCode"=>"SZ"}, {"PlaceId"=>1747, "Name"=>"Turks and Caicos Islands", "Type"=>"Country", "SkyscannerCode"=>"TC"}, {"PlaceId"=>1748, "Name"=>"Chad", "Type"=>"Country", "SkyscannerCode"=>"TD"}, {"PlaceId"=>1751, "Name"=>"Togo", "Type"=>"Country", "SkyscannerCode"=>"TG"}, {"PlaceId"=>1752, "Name"=>"Thailand", "Type"=>"Country", "SkyscannerCode"=>"TH"}, {"PlaceId"=>1757, "Name"=>"Turkmenistan", "Type"=>"Country", "SkyscannerCode"=>"TM"}, {"PlaceId"=>1758, "Name"=>"Tunisia", "Type"=>"Country", "SkyscannerCode"=>"TN"}, {"PlaceId"=>1762, "Name"=>"Turkey", "Type"=>"Country", "SkyscannerCode"=>"TR"}, {"PlaceId"=>1764, "Name"=>"Trinidad and Tobago", "Type"=>"Country", "SkyscannerCode"=>"TT"}, {"PlaceId"=>1767, "Name"=>"Taiwan", "Type"=>"Country", "SkyscannerCode"=>"TW"}, {"PlaceId"=>1770, "Name"=>"Tanzania", "Type"=>"Country", "SkyscannerCode"=>"TZ"}, {"PlaceId"=>1793, "Name"=>"Ukraine", "Type"=>"Country", "SkyscannerCode"=>"UA"}, {"PlaceId"=>1799, "Name"=>"Uganda", "Type"=>"Country", "SkyscannerCode"=>"UG"}, {"PlaceId"=>1803, "Name"=>"United Kingdom", "Type"=>"Country", "SkyscannerCode"=>"UK"}, {"PlaceId"=>1811, "Name"=>"United States", "Type"=>"Country", "SkyscannerCode"=>"US"}, {"PlaceId"=>1817, "Name"=>"Uruguay", "Type"=>"Country", "SkyscannerCode"=>"UY"}, {"PlaceId"=>1818, "Name"=>"Uzbekistan", "Type"=>"Country", "SkyscannerCode"=>"UZ"}, {"PlaceId"=>1845, "Name"=>"Venezuela", "Type"=>"Country", "SkyscannerCode"=>"VE"}, {"PlaceId"=>1847, "Name"=>"British Virgin Islands", "Type"=>"Country", "SkyscannerCode"=>"VG"}, {"PlaceId"=>1849, "Name"=>"US Virgin Islands", "Type"=>"Country", "SkyscannerCode"=>"VI"}, {"PlaceId"=>1854, "Name"=>"Vietnam", "Type"=>"Country", "SkyscannerCode"=>"VN"}, {"PlaceId"=>2033, "Name"=>"South Africa", "Type"=>"Country", "SkyscannerCode"=>"ZA"}, {"PlaceId"=>2045, "Name"=>"Zambia", "Type"=>"Country", "SkyscannerCode"=>"ZM"}, {"PlaceId"=>2055, "Name"=>"Zimbabwe", "Type"=>"Country", "SkyscannerCode"=>"ZW"}, {"PlaceId"=>40099, "IataCode"=>"ACC", "Name"=>"Accra", "Type"=>"Station", "SkyscannerCode"=>"ACC", "CityName"=>"Accra", "CityId"=>"ACCA", "CountryName"=>"Ghana"}, {"PlaceId"=>40595, "IataCode"=>"AMS", "Name"=>"Amsterdam", "Type"=>"Station", "SkyscannerCode"=>"AMS", "CityName"=>"Amsterdam", "CityId"=>"AMST", "CountryName"=>"Netherlands"}, {"PlaceId"=>40645, "IataCode"=>"ANU", "Name"=>"Saint John's", "Type"=>"Station", "SkyscannerCode"=>"ANU", "CityName"=>"Saint John's", "CityId"=>"ANUA", "CountryName"=>"Antigua and Barbuda"}, {"PlaceId"=>40830, "IataCode"=>"ARN", "Name"=>"Stockholm Arlanda", "Type"=>"Station", "SkyscannerCode"=>"ARN", "CityName"=>"Stockholm", "CityId"=>"STOC", "CountryName"=>"Sweden"}, {"PlaceId"=>42414, "IataCode"=>"BCN", "Name"=>"Barcelona", "Type"=>"Station", "SkyscannerCode"=>"BCN", "CityName"=>"Barcelona", "CityId"=>"BARC", "CountryName"=>"Spain"}, {"PlaceId"=>42601, "IataCode"=>"BGI", "Name"=>"Bridgetown", "Type"=>"Station", "SkyscannerCode"=>"BGI", "CityName"=>"Bridgetown", "CityId"=>"BGIA", "CountryName"=>"Barbados"}, {"PlaceId"=>42795, "IataCode"=>"BKK", "Name"=>"Bangkok Suvarnabhumi", "Type"=>"Station", "SkyscannerCode"=>"BKK", "CityName"=>"Bangkok", "CityId"=>"BKKT", "CountryName"=>"Thailand"}, {"PlaceId"=>42995, "IataCode"=>"BOS", "Name"=>"Boston Logan International", "Type"=>"Station", "SkyscannerCode"=>"BOS", "CityName"=>"Boston", "CityId"=>"BOSA", "CountryName"=>"United States"}, {"PlaceId"=>44617, "IataCode"=>"CAI", "Name"=>"Cairo", "Type"=>"Station", "SkyscannerCode"=>"CAI", "CityName"=>"Cairo", "CityId"=>"CAIR", "CountryName"=>"Egypt"}, {"PlaceId"=>44759, "IataCode"=>"CDG", "Name"=>"Paris Charles de Gaulle", "Type"=>"Station", "SkyscannerCode"=>"CDG", "CityName"=>"Paris", "CityId"=>"PARI", "CountryName"=>"France"}, {"PlaceId"=>45198, "IataCode"=>"CMN", "Name"=>"Casablanca Mohamed V.", "Type"=>"Station", "SkyscannerCode"=>"CMN", "CityName"=>"Casablanca", "CityId"=>"CASA", "CountryName"=>"Morocco"}, {"PlaceId"=>45336, "IataCode"=>"CPH", "Name"=>"Copenhagen", "Type"=>"Station", "SkyscannerCode"=>"CPH", "CityName"=>"Copenhagen", "CityId"=>"COPE", "CountryName"=>"Denmark"}, {"PlaceId"=>46915, "IataCode"=>"DAC", "Name"=>"Dhaka", "Type"=>"Station", "SkyscannerCode"=>"DAC", "CityName"=>"Dhaka", "CityId"=>"DACA", "CountryName"=>"Bangladesh"}, {"PlaceId"=>47651, "IataCode"=>"DPS", "Name"=>"Bali (Denpasar)", "Type"=>"Station", "SkyscannerCode"=>"DPS", "CityName"=>"Bali (Denpasar)", "CityId"=>"DPSI", "CountryName"=>"Indonesia"}, {"PlaceId"=>48018, "IataCode"=>"DXB", "Name"=>"Dubai", "Type"=>"Station", "SkyscannerCode"=>"DXB", "CityName"=>"Dubai", "CityId"=>"DXBA", "CountryName"=>"United Arab Emirates"}, {"PlaceId"=>49369, "IataCode"=>"EDI", "Name"=>"Edinburgh", "Type"=>"Station", "SkyscannerCode"=>"EDI", "CityName"=>"Edinburgh", "CityId"=>"EDIN", "CountryName"=>"United Kingdom"}, {"PlaceId"=>50290, "IataCode"=>"EWR", "Name"=>"New York Newark", "Type"=>"Station", "SkyscannerCode"=>"EWR", "CityName"=>"New York", "CityId"=>"NYCA", "CountryName"=>"United States"}, {"PlaceId"=>51670, "IataCode"=>"FDF", "Name"=>"Fort De France", "Type"=>"Station", "SkyscannerCode"=>"FDF", "CityName"=>"Fort De France", "CityId"=>"FDFA", "CountryName"=>"Martinique"}, {"PlaceId"=>52337, "IataCode"=>"FRA", "Name"=>"Frankfurt am Main", "Type"=>"Station", "SkyscannerCode"=>"FRA", "CityName"=>"Frankfurt", "CityId"=>"FRAN", "CountryName"=>"Germany"}, {"PlaceId"=>54215, "IataCode"=>"GIG", "Name"=>"Rio De Janeiro Internacional", "Type"=>"Station", "SkyscannerCode"=>"GIG", "CityName"=>"Rio De Janeiro", "CityId"=>"RIOA", "CountryName"=>"Brazil"}, {"PlaceId"=>54452, "IataCode"=>"GND", "Name"=>"St. George", "Type"=>"Station", "SkyscannerCode"=>"GND", "CityName"=>"St. George", "CityId"=>"GNDA", "CountryName"=>"Grenada"}, {"PlaceId"=>54833, "IataCode"=>"GVA", "Name"=>"Geneva", "Type"=>"Station", "SkyscannerCode"=>"GVA", "CityName"=>"Geneva", "CityId"=>"GENE", "CountryName"=>"Switzerland"}, {"PlaceId"=>56150, "IataCode"=>"HAV", "Name"=>"Havana", "Type"=>"Station", "SkyscannerCode"=>"HAV", "CityName"=>"Havana", "CityId"=>"HAVA", "CountryName"=>"Cuba"}, {"PlaceId"=>56615, "IataCode"=>"HKG", "Name"=>"Hong Kong International", "Type"=>"Station", "SkyscannerCode"=>"HKG", "CityName"=>"Hong Kong", "CityId"=>"HKGA", "CountryName"=>"Hong Kong"}, {"PlaceId"=>58542, "IataCode"=>"ICN", "Name"=>"Seoul Incheon Int'l", "Type"=>"Station", "SkyscannerCode"=>"ICN", "CityName"=>"Seoul", "CityId"=>"SELA", "CountryName"=>"South Korea"}, {"PlaceId"=>59316, "IataCode"=>"IST", "Name"=>"Istanbul Ataturk", "Type"=>"Station", "SkyscannerCode"=>"IST", "CityName"=>"Istanbul", "CityId"=>"ISTA", "CountryName"=>"Turkey"}, {"PlaceId"=>60932, "IataCode"=>"JED", "Name"=>"Jeddah", "Type"=>"Station", "SkyscannerCode"=>"JED", "CityName"=>"Jeddah", "CityId"=>"JEDA", "CountryName"=>"Saudi Arabia"}, {"PlaceId"=>60987, "IataCode"=>"JFK", "Name"=>"New York John F. Kennedy", "Type"=>"Station", "SkyscannerCode"=>"JFK", "CityName"=>"New York", "CityId"=>"NYCA", "CountryName"=>"United States"}, {"PlaceId"=>61362, "IataCode"=>"JNB", "Name"=>"Johannesburg O.R. Tambo", "Type"=>"Station", "SkyscannerCode"=>"JNB", "CityName"=>"Johannesburg", "CityId"=>"JNBA", "CountryName"=>"South Africa"}, {"PlaceId"=>63238, "IataCode"=>"KEF", "Name"=>"Reykjavik Keflavik", "Type"=>"Station", "SkyscannerCode"=>"KEF", "CityName"=>"Reykjavik", "CityId"=>"REYK", "CountryName"=>"Iceland"}, {"PlaceId"=>63438, "IataCode"=>"KIN", "Name"=>"Kingston Norman Manley", "Type"=>"Station", "SkyscannerCode"=>"KIN", "CityName"=>"Kingston", "CityId"=>"KINA", "CountryName"=>"Jamaica"}, {"PlaceId"=>65633, "IataCode"=>"LGA", "Name"=>"New York LaGuardia", "Type"=>"Station", "SkyscannerCode"=>"LGA", "CityName"=>"New York", "CityId"=>"NYCA", "CountryName"=>"United States"}, {"PlaceId"=>65655, "IataCode"=>"LGW", "Name"=>"London Gatwick", "Type"=>"Station", "SkyscannerCode"=>"LGW", "CityName"=>"London", "CityId"=>"LOND", "CountryName"=>"United Kingdom"}, {"PlaceId"=>65698, "IataCode"=>"LHR", "Name"=>"London Heathrow", "Type"=>"Station", "SkyscannerCode"=>"LHR", "CityName"=>"London", "CityId"=>"LOND", "CountryName"=>"United Kingdom"}, {"PlaceId"=>65741, "IataCode"=>"LIM", "Name"=>"Lima", "Type"=>"Station", "SkyscannerCode"=>"LIM", "CityName"=>"Lima", "CityId"=>"LIMA", "CountryName"=>"Peru"}, {"PlaceId"=>65746, "IataCode"=>"LIR", "Name"=>"Liberia", "Type"=>"Station", "SkyscannerCode"=>"LIR", "CityName"=>"Liberia", "CityId"=>"LIRA", "CountryName"=>"Costa Rica"}, {"PlaceId"=>66035, "IataCode"=>"LOS", "Name"=>"Lagos", "Type"=>"Station", "SkyscannerCode"=>"LOS", "CityName"=>"Lagos", "CityId"=>"LOSA", "CountryName"=>"Nigeria"}, {"PlaceId"=>67706, "IataCode"=>"MBJ", "Name"=>"Montego Bay", "Type"=>"Station", "SkyscannerCode"=>"MBJ", "CityName"=>"Montego Bay", "CityId"=>"MBJA", "CountryName"=>"Jamaica"}, {"PlaceId"=>67764, "IataCode"=>"MCT", "Name"=>"Muscat", "Type"=>"Station", "SkyscannerCode"=>"MCT", "CityName"=>"Muscat", "CityId"=>"MCTA", "CountryName"=>"Oman"}, {"PlaceId"=>67797, "IataCode"=>"MDE", "Name"=>"Medellin Jose Maria Cordova", "Type"=>"Station", "SkyscannerCode"=>"MDE", "CityName"=>"Medellin", "CityId"=>"MDEA", "CountryName"=>"Colombia"}, {"PlaceId"=>67864, "IataCode"=>"MEX", "Name"=>"Mexico City Juarez International", "Type"=>"Station", "SkyscannerCode"=>"MEX", "CityName"=>"Mexico City", "CityId"=>"MEXA", "CountryName"=>"Mexico"}, {"PlaceId"=>67937, "IataCode"=>"MGA", "Name"=>"Managua", "Type"=>"Station", "SkyscannerCode"=>"MGA", "CityName"=>"Managua", "CityId"=>"MGAA", "CountryName"=>"Nicaragua"}, {"PlaceId"=>68036, "IataCode"=>"MID", "Name"=>"Merida", "Type"=>"Station", "SkyscannerCode"=>"MID", "CityName"=>"Merida", "CityId"=>"MIDA", "CountryName"=>"Mexico"}, {"PlaceId"=>68181, "IataCode"=>"MLE", "Name"=>"Velana International", "Type"=>"Station", "SkyscannerCode"=>"MLE", "CityName"=>"Male", "CityId"=>"MLEA", "CountryName"=>"Maldives"}, {"PlaceId"=>68284, "IataCode"=>"MNL", "Name"=>"Manila Ninoy Aquino", "Type"=>"Station", "SkyscannerCode"=>"MNL", "CityName"=>"Manila", "CityId"=>"MNLP", "CountryName"=>"Philippines"}, {"PlaceId"=>68768, "IataCode"=>"MXP", "Name"=>"Milan Malpensa", "Type"=>"Station", "SkyscannerCode"=>"MXP", "CityName"=>"Milan", "CityId"=>"MILA", "CountryName"=>"Italy"}, {"PlaceId"=>69971, "IataCode"=>"NAS", "Name"=>"Nassau International", "Type"=>"Station", "SkyscannerCode"=>"NAS", "CityName"=>"Nassau", "CityId"=>"NASA", "CountryName"=>"Bahamas"}, {"PlaceId"=>70788, "IataCode"=>"NRT", "Name"=>"Tokyo Narita", "Type"=>"Station", "SkyscannerCode"=>"NRT", "CityName"=>"Tokyo", "CityId"=>"TYOA", "CountryName"=>"Japan"}, {"PlaceId"=>72991, "IataCode"=>"OPO", "Name"=>"Porto", "Type"=>"Station", "SkyscannerCode"=>"OPO", "CityName"=>"Porto", "CityId"=>"PORT", "CountryName"=>"Portugal"}, {"PlaceId"=>73097, "IataCode"=>"ORY", "Name"=>"Paris Orly", "Type"=>"Station", "SkyscannerCode"=>"ORY", "CityName"=>"Paris", "CityId"=>"PARI", "CountryName"=>"France"}, {"PlaceId"=>73132, "IataCode"=>"OSL", "Name"=>"Oslo Gardermoen", "Type"=>"Station", "SkyscannerCode"=>"OSL", "CityName"=>"Oslo", "CityId"=>"OSLO", "CountryName"=>"Norway"}, {"PlaceId"=>74576, "IataCode"=>"PAP", "Name"=>"Port Au Prince", "Type"=>"Station", "SkyscannerCode"=>"PAP", "CityName"=>"Port Au Prince", "CityId"=>"PAPA", "CountryName"=>"Haiti"}, {"PlaceId"=>74770, "IataCode"=>"PER", "Name"=>"Perth", "Type"=>"Station", "SkyscannerCode"=>"PER", "CityName"=>"Perth", "CityId"=>"PERA", "CountryName"=>"Australia"}, {"PlaceId"=>75107, "IataCode"=>"PLS", "Name"=>"Providenciales", "Type"=>"Station", "SkyscannerCode"=>"PLS", "CityName"=>"Providenciales", "CityId"=>"PLSA", "CountryName"=>"Turks and Caicos Islands"}, {"PlaceId"=>75383, "IataCode"=>"PRG", "Name"=>"Prague", "Type"=>"Station", "SkyscannerCode"=>"PRG", "CityName"=>"Prague", "CityId"=>"PRAG", "CountryName"=>"Czech Republic"}, {"PlaceId"=>75497, "IataCode"=>"PTY", "Name"=>"Panama City Tocumen International", "Type"=>"Station", "SkyscannerCode"=>"PTY", "CityName"=>"Panama City", "CityId"=>"PTYA", "CountryName"=>"Panama"}, {"PlaceId"=>75575, "IataCode"=>"PVG", "Name"=>"Shanghai Pu Dong", "Type"=>"Station", "SkyscannerCode"=>"PVG", "CityName"=>"Shanghai", "CityId"=>"CSHA", "CountryName"=>"China"}, {"PlaceId"=>81488, "IataCode"=>"SAP", "Name"=>"San Pedro Sula", "Type"=>"Station", "SkyscannerCode"=>"SAP", "CityName"=>"San Pedro Sula", "CityId"=>"SAPA", "CountryName"=>"Honduras"}, {"PlaceId"=>81580, "IataCode"=>"SCL", "Name"=>"Santiago Arturo Merino Benitez", "Type"=>"Station", "SkyscannerCode"=>"SCL", "CityName"=>"Santiago", "CityId"=>"SCLA", "CountryName"=>"Chile"}, {"PlaceId"=>81633, "IataCode"=>"SDQ", "Name"=>"Santo Domingo Las Americas", "Type"=>"Station", "SkyscannerCode"=>"SDQ", "CityName"=>"Santo Domingo", "CityId"=>"SDQA", "CountryName"=>"Dominican Republic"}, {"PlaceId"=>81925, "IataCode"=>"SJU", "Name"=>"San Juan Luis Munoz Marin", "Type"=>"Station", "SkyscannerCode"=>"SJU", "CityName"=>"San Juan", "CityId"=>"SJUA", "CountryName"=>"Puerto Rico"}, {"PlaceId"=>82021, "IataCode"=>"SLU", "Name"=>"St Lucia Vigie", "Type"=>"Station", "SkyscannerCode"=>"SLU", "CityName"=>"Castries", "CityId"=>"SLUA", "CountryName"=>"Saint Lucia"}, {"PlaceId"=>82110, "IataCode"=>"SNN", "Name"=>"Shannon", "Type"=>"Station", "SkyscannerCode"=>"SNN", "CityName"=>"Shannon", "CityId"=>"SHAN", "CountryName"=>"Ireland"}, {"PlaceId"=>82150, "IataCode"=>"SOF", "Name"=>"Sofia", "Type"=>"Station", "SkyscannerCode"=>"SOF", "CityName"=>"Sofia", "CityId"=>"SOFI", "CountryName"=>"Bulgaria"}, {"PlaceId"=>82404, "IataCode"=>"STT", "Name"=>"Saint Thomas Cyril E King", "Type"=>"Station", "SkyscannerCode"=>"STT", "CityName"=>"Saint Thomas", "CityId"=>"STTA", "CountryName"=>"US Virgin Islands"}, {"PlaceId"=>82495, "IataCode"=>"SVO", "Name"=>"Moscow Sheremetyevo", "Type"=>"Station", "SkyscannerCode"=>"SVO", "CityName"=>"Moscow", "CityId"=>"MOSC", "CountryName"=>"Russia"}, {"PlaceId"=>84326, "IataCode"=>"TLV", "Name"=>"Ben Gurion Intl", "Type"=>"Station", "SkyscannerCode"=>"TLV", "CityName"=>"Tel Aviv", "CityId"=>"TELA", "CountryName"=>"Israel"}, {"PlaceId"=>84501, "IataCode"=>"TPE", "Name"=>"Taipei Taiwan Taoyuan", "Type"=>"Station", "SkyscannerCode"=>"TPE", "CityName"=>"Taipei", "CityId"=>"TPET", "CountryName"=>"Taiwan"}, {"PlaceId"=>84892, "IataCode"=>"TXL", "Name"=>"Berlin Tegel", "Type"=>"Station", "SkyscannerCode"=>"TXL", "CityName"=>"Berlin", "CityId"=>"BERL", "CountryName"=>"Germany"}, {"PlaceId"=>88773, "IataCode"=>"VIE", "Name"=>"Vienna", "Type"=>"Station", "SkyscannerCode"=>"VIE", "CityName"=>"Vienna", "CityId"=>"VIEN", "CountryName"=>"Austria"}, {"PlaceId"=>88879, "IataCode"=>"VKO", "Name"=>"Moscow Vnukovo", "Type"=>"Station", "SkyscannerCode"=>"VKO", "CityName"=>"Moscow", "CityId"=>"MOSC", "CountryName"=>"Russia"}, {"PlaceId"=>96268, "IataCode"=>"YUL", "Name"=>"Montreal Pierre Elliott Trudeau", "Type"=>"Station", "SkyscannerCode"=>"YUL", "CityName"=>"Montreal", "CityId"=>"YMQA", "CountryName"=>"Canada"}, {"PlaceId"=>97604, "IataCode"=>"ZAD", "Name"=>"Zadar", "Type"=>"Station", "SkyscannerCode"=>"ZAD", "CityName"=>"Zadar", "CityId"=>"ZADA", "CountryName"=>"Croatia"}, {"PlaceId"=>98424, "IataCode"=>"ZRH", "Name"=>"Zurich", "Type"=>"Station", "SkyscannerCode"=>"ZRH", "CityName"=>"Zurich", "CityId"=>"ZURI", "CountryName"=>"Switzerland"}, {"PlaceId"=>3413153, "IataCode"=>"NYC", "Name"=>"New York", "Type"=>"City", "SkyscannerCode"=>"NYCA", "CityName"=>"New York", "CityId"=>"NYCA"}]

      parsed_quote = quote_updater.prepare_quotes(quotes, carriers, places)

      expect(parsed_quote.first["OutboundLeg"]["OriginCity"]).to eq("New York")
      expect(parsed_quote.first["OutboundLeg"]["DestinationCity"]).to eq("Boston")
      expect(parsed_quote.first["InboundLeg"]["OriginCity"]).to eq("Boston")
      expect(parsed_quote.first["InboundLeg"]["DestinationCity"]).to eq("New York")
      expect(parsed_quote.first["OutboundLeg"]["OriginAirport"]).to eq("New York John F. Kennedy")
      expect(parsed_quote.first["OutboundLeg"]["DestinationAirport"]).to eq("Boston Logan International")
      expect(parsed_quote.first["InboundLeg"]["OriginAirport"]).to eq("Boston Logan International")
      expect(parsed_quote.first["InboundLeg"]["DestinationAirport"]).to eq("New York John F. Kennedy")
      expect(parsed_quote.first["OutboundLeg"]["OriginCountry"]).to eq("United States")
      expect(parsed_quote.first["OutboundLeg"]["DestinationCountry"]).to eq("United States")
      expect(parsed_quote.first["InboundLeg"]["OriginCountry"]).to eq("United States")
      expect(parsed_quote.first["InboundLeg"]["DestinationCountry"]).to eq("United States")
    end
  end
end
